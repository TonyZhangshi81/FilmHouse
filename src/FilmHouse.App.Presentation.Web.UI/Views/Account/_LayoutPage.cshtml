@using FilmHouse.Commands;
@using FilmHouse.Core.Services.Configuration;

@inject ISettingProvider settingProvider

@{
    var subTitle = settingProvider.GetValue("WebSiteSettings:SubTitle");
    var name = settingProvider.GetValue("WebSiteSettings:Name");
}

<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>@ViewBag.Title - @name</title>

    <link rel="stylesheet" asp-append-version="true" href="~/lib/bootstrap/css/bootstrap.css" />
    <link rel="stylesheet" asp-append-version="true" href="~/css/site.css" />
    <link rel="stylesheet" asp-append-version="true" href="~/css/custom.css" />
    <link rel="stylesheet" asp-append-version="true" href="~/lib/font-awesome/css/font-awesome.css" />

    @await RenderSectionAsync("Links", required: false)

    <script src="~/lib/jquery/jquery.js" asp-append-version="true" type="text/javascript"></script>
    <script src="~/lib/bootstrap/js/bootstrap.js" asp-append-version="true" type="text/javascript"></script>
    <script src="~/lib/respond/respond.js" asp-append-version="true" type="text/javascript"></script>
    <script src="~/lib/modernizr/modernizr.js" asp-append-version="true" type="text/javascript"></script>
    <script src="~/lib/barba/barba.js" asp-append-version="true" type="text/javascript"></script>
    <script src="~/lib/backstrech/jquery.backstrech.min.js" asp-append-version="true" type="text/javascript"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.js" asp-append-version="true" type="text/javascript"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js" asp-append-version="true" type="text/javascript"></script>

</head>

<body style="padding:0px; height:100%; background-size:cover; overflow:hidden;">

    <div style="height:30px; margin:10px 10px 0px 10px;">
        <a href="/Home/Index" class="link-icon" title="@name @subTitle">
            <img src="~/Content/Icon/Gray.png" style="width:32px; height:32px;" />
        </a>
        <div style="max-width:560px; min-width:360px;">
            @using (Html.BeginForm("Index", "Search", FormMethod.Post, new { @class = "form-horizontal", role = "form", id = "searchForm" }))
            {
                <div class="input-group">
                    <span class="input-group-addon" style="border-radius:2px 0px 0px 2px; border:0px; background-color:rgba(255, 255, 255, 0.6);">
                        <i class="fa fa-search"></i>
                    </span>
                    <input type="search" class="form-control" placeholder="搜索 电影" style="border-radius:0px 2px 2px 0px; border:0px; background-color:rgba(255, 255, 255, 0.6); -webkit-box-shadow:none; -moz-box-shadow:none; box-shadow:none;" name="search" />
                </div>
            }
        </div>

        <div class="hidden" style="display:inline; float:right;">
            <a class="btn btn-sm btn-account" style="margin-right:20px;" href="/Account/Register">注册</a>
            <a class="btn btn-sm btn-account" href="/Account/Login">登录</a>
        </div>
    </div>

    <div style="position:absolute; top:0; bottom:0; left:0; right:0; margin:auto; height:50%;">
        <div id="barba-wrapper">
            <div class="barba-container">
                @RenderBody()
            </div>
        </div>
    </div>
</body>

<script src="~/js/Account/site.js" asp-append-version="true" defer="defer"></script>

@await RenderSectionAsync("Scripts", required: false)

</html>